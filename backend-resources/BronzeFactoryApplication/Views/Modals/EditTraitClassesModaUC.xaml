<UserControl x:Class="BronzeFactoryApplication.Views.Modals.EditTraitClassesModaUC"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:BronzeFactoryApplication.Views.Modals"
             xmlns:hc="https://handyorg.github.io/handycontrol"
             xmlns:b="clr-namespace:BronzeFactoryApplication.Helpers.Behaviours"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:EnumSource="clr-namespace:BronzeFactoryApplication.Helpers.MarkupExtensions"
             xmlns:Enums="clr-namespace:BathAccessoriesModelsLibrary;assembly=BathAccessoriesModelsLibrary"
             xmlns:photoSizeEnum="clr-namespace:AzureBlobStorageLibrary;assembly=AzureBlobStorageLibrary"
             xmlns:cachedImage="clr-namespace:CachedImage.Core;assembly=CachedImage.Core"
             xmlns:cc="clr-namespace:TasCustomControlsLibrary.CustomControls;assembly=TasCustomControlsLibrary"
             xmlns:vm="clr-namespace:BronzeFactoryApplication.ViewModels.ModalViewModels"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type=vm:EditTraitClassesModalViewModel}">
    <UserControl.Resources>
        <Style TargetType="TextBlock"
               BasedOn="{StaticResource TextBlockBaseStyle}"
               x:Key="LocalizedStringVmTextBlockStyle">
            <Setter Property="Width"
                    Value="145" />
            <Setter Property="TextAlignment"
                    Value="Left" />
        </Style>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>

        <!--#region TRAIT CLASSES DATAGRID -->
        <TextBlock Text="{StaticResource lngTraitClasses}"
                   Style="{StaticResource CHeaderTextBlock}"
                   HorizontalAlignment="Center"
                   Margin="0,10"
                   Grid.Row="0"
                   Grid.Column="0" />
        <StackPanel Orientation="Vertical"
                    Grid.Row="2"
                    Grid.Column="0"
                    Margin="10,0">
            <DataGrid ItemsSource="{Binding TraitClasses}"
                      Style="{StaticResource CDataGridSmall}"
                      SelectedItem="{Binding SelectedTraitClass}"
                      CellStyle="{StaticResource CenteredDataGridCellSmall}"
                      ColumnHeaderStyle="{StaticResource CenteredDataGridColumnHeaderSmall}"
                      HorizontalAlignment="Stretch"
                      EnableRowVirtualization="True"
                      hc:DataGridAttach.ShowRowNumber="True"
                      Height="715"
                      Padding="20,20,20,0"
                      BorderThickness="4"
                      VerticalAlignment="Top">
                <DataGrid.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel />
                    </ItemsPanelTemplate>
                </DataGrid.ItemsPanel>
                <DataGrid.Columns>
                    <DataGridCheckBoxColumn Header="{StaticResource lngEnabled}"
                                            Binding="{Binding IsEnabled}" />
                    <DataGridTextColumn Header="{StaticResource lngName}"
                                        Binding="{Binding Name,Converter={StaticResource LocalizedStringConverter}}" />
                </DataGrid.Columns>
            </DataGrid>
            <Button Margin="0,10"
                    Content="{StaticResource lngEditTraitGroups}"
                    hc:IconElement.Geometry="{StaticResource EditGeometry}"
                    hc:IconElement.Height="15"
                    Foreground="{DynamicResource SecondaryBrush}"
                    Height="50"
                    Command="{Binding OpenEditTraitGroupsCommand}" />
        </StackPanel>
        <!--#endregion-->

        <!--#region EDIT TRAIT CLASS AREA -->
        <!--#region TraitClass TITLE -->
        <TextBlock HorizontalAlignment="Center"
                   Margin="10"
                   Grid.Row="0"
                   Grid.Column="1">
            <TextBlock.Style>
                <Style TargetType="TextBlock"
                       BasedOn="{StaticResource CHeaderTextBlock}">
                    <Setter Property="Text"
                            Value="{StaticResource lngSelectedTraitClass}" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSelectedTraitClassNew}"
                                     Value="True">
                            <Setter Property="Text"
                                    Value="{StaticResource lngNewTraitClass}" />
                            <Setter Property="Foreground"
                                    Value="{DynamicResource SecondaryBrush}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
        <!--#endregion-->

        <!--#region TraitClass Buttons -->
        <DockPanel Grid.Row="1"
                   Grid.Column="1"
                   HorizontalAlignment="Stretch"
                   LastChildFill="False"
                   Margin="10,0">
            <Button Content="{StaticResource lngNewTraitClass}"
                    Foreground="{DynamicResource SecondaryBrush}"
                    hc:IconElement.Geometry="{StaticResource AddGeometry}"
                    DockPanel.Dock="Left"
                    IsEnabled="{Binding IsSelectedTraitClassNew , Converter={StaticResource Boolean2BooleanReConverter}}"
                    Command="{Binding NewTraitClassCommand}" />
            <Button Style="{StaticResource SaveButton}"
                    Foreground="{DynamicResource SecondaryBrush}"
                    DockPanel.Dock="Left"
                    IsEnabled="{Binding CanEditTraitClass}"
                    Command="{Binding SaveTraitClassCommand}" />
            <Button Content="{StaticResource lngDeleteTraitClass}"
                    Foreground="{DynamicResource DangerBrush}"
                    hc:IconElement.Geometry="{StaticResource RemoveGeometry}"
                    DockPanel.Dock="Right"
                    IsEnabled="{Binding IsSelectedTraitClassNew , Converter={StaticResource Boolean2BooleanReConverter}}"
                    Command="{Binding DeleteTraitClassCommand}" />
        </DockPanel>
        <!--#endregion-->

        <!--#region Trait Class Properties -->
        <StackPanel Grid.Row="2"
                    Grid.Column="1"
                    Margin="10,0"
                    Width="590"
                    IsEnabled="{Binding CanEditTraitClass}">
            <Border Padding="10">
                <Border.Style>
                    <Style TargetType="Border">
                        <Setter Property="BorderBrush"
                                Value="{DynamicResource BorderBrush}" />
                        <Setter Property="BorderThickness"
                                Value="4" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsSelectedTraitClassNew}"
                                         Value="True">
                                <Setter Property="BorderBrush"
                                        Value="{DynamicResource SecondaryBrush}" />
                                <Setter Property="BorderThickness"
                                        Value="1" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <StackPanel>

                    <DockPanel HorizontalAlignment="Stretch">
                        <StackPanel MaxWidth="430">
                            <!--#region IsEnabled -->
                            <DockPanel Margin="2,10"
                                       HorizontalAlignment="Left">
                                <cc:Icon ToolTip="{StaticResource lngEnabledTooltip}"
                                         Style="{StaticResource CInfoTooltipIcon}"
                                         Margin="10,0,5,0" />
                                <CheckBox IsChecked="{Binding TraitClassUnderEdit.IsEnabled}"
                                          Content="{StaticResource lngEnabled}" />
                            </DockPanel>
                            <!--#endregion-->

                            <!--#region Name -->
                            <StackPanel Orientation="Horizontal"
                                        x:Name="NameStackPanel">
                                <Button Style="{StaticResource EditLocalizedStringVmButtonStyle}"
                                        Command="{Binding EditLocalizedStringCommand}"
                                        CommandParameter="Name" />
                                <TextBlock Text="{StaticResource lngName}"
                                           Style="{StaticResource LocalizedStringVmTextBlockStyle}" />
                                <TextBlock Text=" : "
                                           VerticalAlignment="Center" />
                                <TextBlock Text="{Binding TraitClassUnderEdit.BaseDescriptiveEntity.Name.MinifiedDefaultValue}"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                            <!--#endregion-->

                            <!--#region Description -->
                            <StackPanel Orientation="Horizontal">
                                <Button Style="{StaticResource EditLocalizedStringVmButtonStyle}"
                                        Command="{Binding EditLocalizedStringCommand}"
                                        CommandParameter="Description" />
                                <TextBlock Text="{StaticResource lngDescription}"
                                           Style="{StaticResource LocalizedStringVmTextBlockStyle}" />
                                <TextBlock Text=" : "
                                           VerticalAlignment="Center" />
                                <TextBlock Text="{Binding TraitClassUnderEdit.BaseDescriptiveEntity.Description.MinifiedDefaultValue}"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                            <!--#endregion-->

                            <!--#region Extended Description -->
                            <StackPanel Orientation="Horizontal">
                                <Button Style="{StaticResource EditLocalizedStringVmButtonStyle}"
                                        Command="{Binding EditLocalizedStringCommand}"
                                        CommandParameter="ExtendedDescription" />
                                <TextBlock Text="{StaticResource lngExtendedDescription}"
                                           Style="{StaticResource LocalizedStringVmTextBlockStyle}" />
                                <TextBlock Text=" : "
                                           VerticalAlignment="Center" />
                                <TextBlock Text="{Binding TraitClassUnderEdit.BaseDescriptiveEntity.ExtendedDescription.MinifiedDefaultValue}"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                            <!--#endregion-->

                            <!--#region SortNo -->
                            <StackPanel x:Name="SortNoTcStackPanel"
                                        Margin="0,5"
                                        Grid.Row="5"
                                        Grid.Column="0">
                                <DockPanel HorizontalAlignment="Left">
                                    <cc:Icon ToolTip="{StaticResource lngSortNoTooltip}"
                                             Style="{StaticResource CInfoTooltipIcon}" />
                                    <TextBlock x:Name="SortNoTcTextBlock"
                                               Style="{StaticResource TitleTextBlockStyle}"
                                               Text="{StaticResource lngSortNo}">
                                    </TextBlock>
                                </DockPanel>
                                <TextBox x:Name="SortNoTcTextBox"
                                         d:Text="99999"
                                         Text="{Binding TraitClassUnderEdit.SortNo ,Mode=TwoWay, TargetNullValue=''}"
                                         MaxLength="5">
                                    <i:Interaction.Behaviors>
                                        <b:TextBoxNumericInputBehavior Precision="0"
                                                                       InputMode="DigitInput" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <!--#endregion-->

                            <!--#region TraitType -->
                            <StackPanel x:Name="TraitTypeStackPanel"
                                        Margin="0,5"
                                        Grid.Row="5"
                                        Grid.Column="0">
                                <DockPanel HorizontalAlignment="Left">
                                    <cc:Icon ToolTip="{StaticResource lngTraitTypeTooltip}"
                                             Style="{StaticResource CInfoTooltipIcon}" />
                                    <TextBlock x:Name="TraitTypeTextBlock"
                                               Style="{StaticResource TitleTextBlockStyle}"
                                               Text="{StaticResource lngTraitType}">
                                    </TextBlock>
                                </DockPanel>
                                <ComboBox x:Name="TraitTypeComboBox"
                                          IsEnabled="{Binding IsSelectedTraitClassNew}"
                                          ItemsSource="{Binding Source={EnumSource:BindingSourceEnumValues {x:Type Enums:TypeOfTrait}}}"
                                          SelectedItem="{Binding TraitClassUnderEdit.TraitType}"
                                          HorizontalContentAlignment="Stretch">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Converter={StaticResource languageConverter} , TargetNullValue=''}" />
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                            </StackPanel>
                            <!--#endregion-->
                        </StackPanel>
                        <!--#region Main Photo Url Control -->
                        <Border Style="{StaticResource CPhotoControlBorder}"
                                DockPanel.Dock="Right"
                                HorizontalAlignment="Right">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="140" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <TextBlock Style="{StaticResource CSmallInfoTextBlock}"
                                           Text="{StaticResource lngPhotoUrl}"
                                           Grid.Row="0"
                                           Grid.Column="1"
                                           VerticalAlignment="Center" />
                                <!--#region Buttons StackPanel -->
                                <StackPanel Grid.Row="0"
                                            Grid.RowSpan="2"
                                            Grid.Column="0"
                                            VerticalAlignment="Top">
                                    <!--#region Select Photo Button -->
                                    <Button Style="{StaticResource ButtonIcon}"
                                            hc:IconElement.Geometry="{StaticResource EditGeometry}"
                                            hc:IconElement.Height="13"
                                            Margin="7"
                                            Height="auto"
                                            Padding="0"
                                            VerticalAlignment="Top"
                                            Foreground="{DynamicResource SecondaryBrush}"
                                            Command="{Binding TraitClassUnderEdit.ChangePhotoUrlCommand}"
                                            ToolTip="{StaticResource lngSelectNewPhoto}"
                                            ToolTipService.Placement="Left"
                                            ToolTipService.VerticalOffset="-15"
                                            ToolTipService.InitialShowDelay="0" />
                                    <!--#endregion-->
                                    <!--#region Open Photo Viewer Button -->
                                    <Button hc:IconElement.Geometry="{StaticResource EyeOpenGeometry}"
                                            hc:IconElement.Height="10"
                                            Margin="7"
                                            Padding="0"
                                            Height="auto"
                                            VerticalAlignment="Top"
                                            Command="{Binding TraitClassUnderEdit.OpenImageViewerCommand}"
                                            CommandParameter="{Binding TraitClassUnderEdit.PhotoURL , Converter={StaticResource BlobUrlConverter}, ConverterParameter={x:Static photoSizeEnum:BlobPhotoSize.MediumSizePhoto}}"
                                            Style="{StaticResource ButtonIcon}"
                                            Foreground="{DynamicResource SecondaryBrush}"
                                            ToolTip="{StaticResource lngInspectPhoto}"
                                            ToolTipService.Placement="Left"
                                            ToolTipService.VerticalOffset="-15"
                                            ToolTipService.HorizontalOffset="2"
                                            ToolTipService.InitialShowDelay="0" />
                                    <!--#endregion-->
                                    <!--#region Info Tooltip -->
                                    <cc:Icon GeometryData="{StaticResource InfoGeometry}"
                                             Height="14"
                                             Margin="7"
                                             Padding="0"
                                             VerticalAlignment="Top"
                                             Fill="{DynamicResource SecondaryBrush}"
                                             ToolTip="{Binding TraitClassUnderEdit.PhotoURL}"
                                             ToolTipService.Placement="Left"
                                             ToolTipService.VerticalOffset="-15"
                                             ToolTipService.HorizontalOffset="2"
                                             ToolTipService.InitialShowDelay="0" />
                                    <!--#endregion-->
                                </StackPanel>
                                <!--#endregion-->
                                <!--#region Buttons Divider -->
                                <hc:Divider Grid.Column="1"
                                            Grid.RowSpan="2"
                                            HorizontalAlignment="Left"
                                            Margin="0"
                                            Orientation="Vertical"
                                            LineStroke="{DynamicResource SecondaryBorderBrush}" />
                                <!--#endregion-->
                                <!--#region MainUrlImage -->
                                <cachedImage:Image Source="{Binding TraitClassUnderEdit.PhotoURL,Converter={StaticResource BlobUrlConverter}, ConverterParameter={x:Static photoSizeEnum:BlobPhotoSize.SmallSizePhoto},Mode=OneWay,FallbackValue={StaticResource DefaultNoImage}}"
                                                   FailedImage="{StaticResource DefaultNoImage}"
                                                   Width="130"
                                                   Margin="10,0,0,0"
                                                   HorizontalAlignment="Center"
                                                   Height="130"
                                                   Stretch="Uniform"
                                                   Grid.Row="1"
                                                   Grid.Column="1" />
                                <!--#endregion-->
                            </Grid>
                        </Border>
                        <!--#endregion-->
                    </DockPanel>

                    <!--#region Traits List -->

                    <StackPanel HorizontalAlignment="Center"
                                Margin="0,10">

                        <TextBlock Text="{StaticResource lngTraits}"
                                   Style="{StaticResource CHeaderTextBlock}"
                                   HorizontalAlignment="Center"
                                   Margin="0,10"
                                   TextDecorations="Underline" />
                        <DataGrid ItemsSource="{Binding SelectedTraitClassTraits}"
                                  Style="{StaticResource CDataGridSmall}"
                                  SelectedItem="{Binding SelectedTrait}"
                                  CellStyle="{StaticResource CenteredDataGridCellSmall}"
                                  ColumnHeaderStyle="{StaticResource CenteredDataGridColumnHeaderSmall}"
                                  HorizontalAlignment="Center"
                                  EnableRowVirtualization="True"
                                  hc:DataGridAttach.ShowRowNumber="True"
                                  Height="450"
                                  MaxWidth="500"
                                  BorderThickness="0"
                                  Padding="15"
                                  VerticalAlignment="Top">
                            <DataGrid.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel />
                                </ItemsPanelTemplate>
                            </DataGrid.ItemsPanel>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="{StaticResource lngTrait}"
                                                    Binding="{Binding Trait,Converter={StaticResource LocalizedStringConverter}}" />
                                <DataGridCheckBoxColumn Header="{StaticResource lngEnabled}"
                                                        Binding="{Binding IsEnabled}" />
                                <DataGridTextColumn Header="{StaticResource lngCode}"
                                                    Binding="{Binding Code , FallbackValue='Undefinied'}" />
                            </DataGrid.Columns>
                        </DataGrid>

                    </StackPanel>

                    <!--#endregion-->

                </StackPanel>
            </Border>
        </StackPanel>
        <!--#endregion-->
        <!--#endregion-->

        <!--#region EDIT TRAIT AREA -->
        <!--#region TITLE -->
        <TextBlock HorizontalAlignment="Center"
                   Margin="10"
                   Grid.Row="0"
                   Grid.Column="2">
            <TextBlock.Style>
                <Style TargetType="TextBlock"
                       BasedOn="{StaticResource CHeaderTextBlock}">
                    <Setter Property="Text"
                            Value="{StaticResource lngSelectedTrait}" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSelectedTraitNew}"
                                     Value="True">
                            <Setter Property="Text"
                                    Value="{StaticResource lngNewTrait}" />
                            <Setter Property="Foreground"
                                    Value="{DynamicResource SecondaryBrush}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
        <!--#endregion-->
        <!--#region Trait Button ToolBar -->
        <DockPanel Grid.Row="1"
                   Grid.Column="2"
                   HorizontalAlignment="Stretch"
                   LastChildFill="False"
                   Margin="10,0">
            <Button Content="{StaticResource lngNewTrait}"
                    Foreground="{DynamicResource SecondaryBrush}"
                    hc:IconElement.Geometry="{StaticResource AddGeometry}"
                    DockPanel.Dock="Left"
                    IsEnabled="{Binding IsSelectedTraitNew , Converter={StaticResource Boolean2BooleanReConverter}}"
                    Command="{Binding NewTraitCommand}" />
            <Button Style="{StaticResource SaveButton}"
                    Foreground="{DynamicResource SecondaryBrush}"
                    DockPanel.Dock="Left"
                    IsEnabled="{Binding CanEditTrait}"
                    Command="{Binding SaveTraitCommand}" />
            <Button Content="{StaticResource lngDeleteTrait}"
                    Foreground="{DynamicResource DangerBrush}"
                    hc:IconElement.Geometry="{StaticResource RemoveGeometry}"
                    DockPanel.Dock="Right"
                    IsEnabled="{Binding IsSelectedTraitNew , Converter={StaticResource Boolean2BooleanReConverter}}"
                    Command="{Binding DeleteTraitCommand}" />
        </DockPanel>
        <!--#endregion-->
        <!--#region Trait Properties -->
        <StackPanel Grid.Row="2"
                    Grid.Column="2"
                    Margin="10,0"
                    MinWidth="550"
                    IsEnabled="{Binding CanEditTrait}">
            <Border Padding="10"
                    Height="715">
                <Border.Style>
                    <Style TargetType="Border">
                        <Setter Property="BorderBrush"
                                Value="{DynamicResource BorderBrush}" />
                        <Setter Property="BorderThickness"
                                Value="4" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsSelectedTraitNew}"
                                         Value="True">
                                <Setter Property="BorderBrush"
                                        Value="{DynamicResource SecondaryBrush}" />
                                <Setter Property="BorderThickness"
                                        Value="1" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <StackPanel>

                    <!--#region IsEnabled -->
                    <DockPanel Margin="3,10"
                               HorizontalAlignment="Left">
                        <cc:Icon ToolTip="{StaticResource lngEnabledTooltip}"
                                 Style="{StaticResource CInfoTooltipIcon}"
                                 Margin="10,0,5,0" />
                        <CheckBox IsChecked="{Binding TraitUnderEdit.IsEnabled}"
                                  Content="{StaticResource lngEnabled}" />
                    </DockPanel>
                    <!--#endregion-->

                    <!--#region Trait Name -->
                    <StackPanel Orientation="Horizontal"
                                x:Name="TraitNameStackPanel">
                        <Button Style="{StaticResource EditLocalizedStringVmButtonStyle}"
                                Command="{Binding EditLocalizedStringCommand}"
                                CommandParameter="Trait" />
                        <TextBlock Text="{StaticResource lngTrait}"
                                   Style="{StaticResource LocalizedStringVmTextBlockStyle}"
                                   Width="210" />
                        <TextBlock Text=" : "
                                   VerticalAlignment="Center" />
                        <TextBlock Text="{Binding TraitUnderEdit.Trait.MinifiedDefaultValue}"
                                   VerticalAlignment="Center" />
                    </StackPanel>
                    <!--#endregion-->

                    <!--#region Trait Tooltip -->
                    <StackPanel Orientation="Horizontal">
                        <Button Style="{StaticResource EditLocalizedStringVmButtonStyle}"
                                Command="{Binding EditLocalizedStringCommand}"
                                CommandParameter="TraitTooltip" />
                        <TextBlock Text="{StaticResource lngTraitTooltip}"
                                   Style="{StaticResource LocalizedStringVmTextBlockStyle}"
                                   Width="210" />
                        <TextBlock Text=" : "
                                   VerticalAlignment="Center" />
                        <TextBlock Text="{Binding TraitUnderEdit.TraitTooltip.MinifiedDefaultValue}"
                                   VerticalAlignment="Center" />
                    </StackPanel>
                    <!--#endregion-->

                    <!--#region TraitType -->
                    <StackPanel x:Name="IsEnabledTraitStackPanel"
                                Margin="0,5">
                        <DockPanel>
                            <cc:Icon ToolTip="{StaticResource lngTraitTypeTooltip}"
                                     Style="{StaticResource CInfoTooltipIcon}" />
                            <TextBlock x:Name="IsEnabledTraitTextBlock"
                                       Style="{StaticResource TitleTextBlockStyle}"
                                       Text="{StaticResource lngTraitType}">
                            </TextBlock>
                        </DockPanel>
                        <ComboBox x:Name="IsEnabledTraitComboBox"
                                  IsEnabled="{Binding IsSelectedTraitNew}"
                                  ItemsSource="{Binding Source={EnumSource:BindingSourceEnumValues {x:Type Enums:TypeOfTrait}}}"
                                  SelectedItem="{Binding TraitUnderEdit.TraitType}"
                                  HorizontalContentAlignment="Stretch">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Converter={StaticResource languageConverter} , TargetNullValue=''}" />
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </StackPanel>
                    <!--#endregion-->

                    <!--#region Trait Code -->
                    <StackPanel x:Name="TraitCodeStackPanel"
                                Margin="0,5">
                        <DockPanel>
                            <cc:Icon ToolTip="{StaticResource lngCodeTooltipAccessory}"
                                     Style="{StaticResource CInfoTooltipIcon}" />
                            <TextBlock x:Name="TraitCodeTextBlock"
                                       Style="{StaticResource TitleTextBlockStyle}"
                                       Text="{StaticResource lngCode}">
                            </TextBlock>
                        </DockPanel>
                        <TextBox x:Name="TraitCodeTextBox"
                                 d:Text="-10-"
                                 Text="{Binding TraitUnderEdit.Code ,Mode=TwoWay, TargetNullValue=''}"
                                 MaxLength="15">
                        </TextBox>
                    </StackPanel>
                    <!--#endregion-->

                    <!--#region SortNo -->
                    <StackPanel x:Name="SortNoTStackPanel"
                                Margin="0,5"
                                Grid.Row="5"
                                Grid.Column="0">
                        <DockPanel HorizontalAlignment="Left">
                            <cc:Icon ToolTip="{StaticResource lngSortNoTooltip}"
                                     Style="{StaticResource CInfoTooltipIcon}" />
                            <TextBlock x:Name="SortNoTTextBlock"
                                       Style="{StaticResource TitleTextBlockStyle}"
                                       Text="{StaticResource lngSortNo}">
                            </TextBlock>
                        </DockPanel>
                        <TextBox x:Name="SortNoTTextBox"
                                 d:Text="99999"
                                 Text="{Binding TraitUnderEdit.SortNo ,Mode=TwoWay, TargetNullValue=''}"
                                 MaxLength="5">
                            <i:Interaction.Behaviors>
                                <b:TextBoxNumericInputBehavior Precision="0"
                                                               InputMode="DigitInput" />
                            </i:Interaction.Behaviors>
                        </TextBox>
                    </StackPanel>
                    <!--#endregion-->

                    <!--#region Main Photo Url Control -->
                    <Border Style="{StaticResource CPhotoControlBorder}"
                            DockPanel.Dock="Right"
                            HorizontalAlignment="Center"
                            Margin="20">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="140" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <TextBlock Style="{StaticResource CSmallInfoTextBlock}"
                                       Text="{StaticResource lngPhotoUrl}"
                                       Grid.Row="0"
                                       Grid.Column="1"
                                       VerticalAlignment="Center" />
                            <!--#region Buttons StackPanel -->
                            <StackPanel Grid.Row="0"
                                        Grid.RowSpan="2"
                                        Grid.Column="0"
                                        VerticalAlignment="Top">
                                <!--#region Select Photo Button -->
                                <Button Style="{StaticResource ButtonIcon}"
                                        hc:IconElement.Geometry="{StaticResource EditGeometry}"
                                        hc:IconElement.Height="13"
                                        Margin="7"
                                        Height="auto"
                                        Padding="0"
                                        VerticalAlignment="Top"
                                        Foreground="{DynamicResource SecondaryBrush}"
                                        Command="{Binding TraitUnderEdit.ChangePhotoUrlCommand}"
                                        ToolTip="{StaticResource lngSelectNewPhoto}"
                                        ToolTipService.Placement="Left"
                                        ToolTipService.VerticalOffset="-15"
                                        ToolTipService.InitialShowDelay="0" />
                                <!--#endregion-->
                                <!--#region Open Photo Viewer Button -->
                                <Button hc:IconElement.Geometry="{StaticResource EyeOpenGeometry}"
                                        hc:IconElement.Height="10"
                                        Margin="7"
                                        Padding="0"
                                        Height="auto"
                                        VerticalAlignment="Top"
                                        Command="{Binding TraitUnderEdit.OpenImageViewerCommand}"
                                        CommandParameter="{Binding TraitUnderEdit.PhotoURL , Converter={StaticResource BlobUrlConverter}, ConverterParameter={x:Static photoSizeEnum:BlobPhotoSize.MediumSizePhoto}}"
                                        Style="{StaticResource ButtonIcon}"
                                        Foreground="{DynamicResource SecondaryBrush}"
                                        ToolTip="{StaticResource lngInspectPhoto}"
                                        ToolTipService.Placement="Left"
                                        ToolTipService.VerticalOffset="-15"
                                        ToolTipService.HorizontalOffset="2"
                                        ToolTipService.InitialShowDelay="0" />
                                <!--#endregion-->
                                <!--#region Info Tooltip -->
                                <cc:Icon GeometryData="{StaticResource InfoGeometry}"
                                         Height="14"
                                         Margin="7"
                                         Padding="0"
                                         VerticalAlignment="Top"
                                         Fill="{DynamicResource SecondaryBrush}"
                                         ToolTip="{Binding TraitUnderEdit.PhotoURL}"
                                         ToolTipService.Placement="Left"
                                         ToolTipService.VerticalOffset="-15"
                                         ToolTipService.HorizontalOffset="2"
                                         ToolTipService.InitialShowDelay="0" />
                                <!--#endregion-->
                            </StackPanel>
                            <!--#endregion-->
                            <!--#region Buttons Divider -->
                            <hc:Divider Grid.Column="1"
                                        Grid.RowSpan="2"
                                        HorizontalAlignment="Left"
                                        Margin="0"
                                        Orientation="Vertical"
                                        LineStroke="{DynamicResource SecondaryBorderBrush}" />
                            <!--#endregion-->
                            <!--#region MainUrlImage -->
                            <cachedImage:Image Source="{Binding TraitUnderEdit.PhotoURL,Converter={StaticResource BlobUrlConverter}, ConverterParameter={x:Static photoSizeEnum:BlobPhotoSize.SmallSizePhoto},Mode=OneWay,FallbackValue={StaticResource DefaultNoImage}}"
                                               FailedImage="{StaticResource DefaultNoImage}"
                                               Width="130"
                                               Margin="10,0,0,0"
                                               HorizontalAlignment="Center"
                                               Height="130"
                                               Stretch="Uniform"
                                               Grid.Row="1"
                                               Grid.Column="1" />
                            <!--#endregion-->
                        </Grid>
                    </Border>
                    <!--#endregion-->

                    <!--#region Trait Groups and Secondary Types -->
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">

                        <!--#region Trait Groups -->
                        <StackPanel x:Name="TraitGroupsStackPanel"
                                    Height="220"
                                    HorizontalAlignment="Center"
                                    Orientation="Vertical">
                            <!--#region ListBox with Title -->
                            <StackPanel VerticalAlignment="Center">
                                <DockPanel>
                                    <cc:Icon ToolTip="{StaticResource lngTraitGroupsTooltip}"
                                             Style="{StaticResource CInfoTooltipIcon}" />
                                    <TextBlock x:Name="TraitGroupsTextBlock"
                                               Style="{StaticResource TitleTextBlockStyle}"
                                               Text="{StaticResource lngTraitGroups}">
                                    </TextBlock>
                                </DockPanel>
                                <ListBox ItemsSource="{Binding TraitUnderEdit.AssignedGroups}"
                                         Height="120">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <DockPanel LastChildFill="True">
                                                <Button Style="{StaticResource ButtonIconCircular.Small}"
                                                        Foreground="{DynamicResource DangerBrush}"
                                                        hc:IconElement.Geometry="{StaticResource RemoveGeometry}"
                                                        hc:IconElement.Height="8"
                                                        BorderBrush="{DynamicResource DangerBrush}"
                                                        Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor} , Path=DataContext.TraitUnderEdit.RemoveTraitGroupCommand}"
                                                        CommandParameter="{Binding .}" />
                                                <TextBlock Text="{Binding Name , Converter={StaticResource LocalizedStringConverter}}"
                                                           VerticalAlignment="Center"
                                                           TextAlignment="Center"
                                                           Margin="10,0" />
                                            </DockPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                            <!--#endregion-->

                            <!--#region ComboBox with Add Button -->
                            <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Margin="20,10,0,0">
                                <StackPanel>
                                    <DockPanel>
                                        <cc:Icon ToolTip="{StaticResource lngAdd}"
                                                 Style="{StaticResource CInfoTooltipIcon}" />
                                        <TextBlock x:Name="AddTraitGroupTextBlock"
                                                   Style="{StaticResource TitleTextBlockStyle}"
                                                   Text="{StaticResource lngAdd}">
                                        </TextBlock>
                                    </DockPanel>
                                    <ComboBox x:Name="AssignableGroupsComboBox"
                                              ItemsSource="{Binding CurrentAssignableGroups}"
                                              SelectedItem="{Binding TraitUnderEdit.SelectedGroup}"
                                              Width="200"
                                              FontSize="14"
                                              VerticalAlignment="Center">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Width="60"
                                                               TextAlignment="Left"
                                                               Text="{Binding Code}" />
                                                    <TextBlock Text=" - " />
                                                    <TextBlock Text="{Binding Name, Converter={StaticResource LocalizedStringConverter}}" />
                                                </StackPanel>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                                <Button Style="{StaticResource ButtonIconCircular}"
                                        hc:IconElement.Geometry="{StaticResource AddGeometry}"
                                        Foreground="{DynamicResource SuccessBrush}"
                                        Command="{Binding TraitUnderEdit.AddTraitGroupCommand}"
                                        VerticalAlignment="Bottom"
                                        Margin="15,0"
                                        ToolTip="{StaticResource lngAdd}" />
                            </StackPanel>
                            <!--#endregion-->

                        </StackPanel>
                        <!--#endregion-->

                        <hc:Divider Margin="25,30" LineStroke="{DynamicResource PrimaryBrush}" LineStrokeThickness="1" Orientation="Vertical"
                                    Visibility="{Binding TraitUnderEdit.IsPrimaryTypeTrait, Converter={StaticResource Boolean2VisibilityConverter}}"/>

                        <!--#region SecondaryTypes Only for PrimaryType Traits -->
                        <StackPanel x:Name="SecondaryTypesStackPanel"
                                    Height="220"
                                    HorizontalAlignment="Center"
                                    Orientation="Vertical"
                                    Visibility="{Binding TraitUnderEdit.IsPrimaryTypeTrait, Converter={StaticResource Boolean2VisibilityConverter}}">
                            <!--#region ListBox with Title -->
                            <StackPanel VerticalAlignment="Center">
                                <DockPanel>
                                    <cc:Icon ToolTip="{StaticResource lngSecondaryTypesTooltipAccessory}"
                                             Style="{StaticResource CInfoTooltipIcon}" />
                                    <TextBlock x:Name="SecondaryTypesTextBlock"
                                               Style="{StaticResource TitleTextBlockStyle}"
                                               Text="{StaticResource lngSecondaryTypes}">
                                    </TextBlock>
                                </DockPanel>
                                <ListBox ItemsSource="{Binding TraitUnderEdit.SecondaryTypes}"
                                         Height="120">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <DockPanel LastChildFill="True">
                                                <Button Style="{StaticResource ButtonIconCircular.Small}"
                                                        Foreground="{DynamicResource DangerBrush}"
                                                        hc:IconElement.Geometry="{StaticResource RemoveGeometry}"
                                                        hc:IconElement.Height="8"
                                                        BorderBrush="{DynamicResource DangerBrush}"
                                                        Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor} , Path=DataContext.TraitUnderEdit.RemoveSecondaryTypeCommand}"
                                                        CommandParameter="{Binding .}" />
                                                <TextBlock Text="{Binding Trait , Converter={StaticResource LocalizedStringConverter}}"
                                                           VerticalAlignment="Center"
                                                           TextAlignment="Center"
                                                           Margin="10,0" />
                                            </DockPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                            <!--#endregion-->

                            <!--#region ComboBox with Add Button -->
                            <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Margin="20,10,0,0">
                                <StackPanel>
                                    <DockPanel>
                                        <cc:Icon ToolTip="{StaticResource lngAdd}"
                                                 Style="{StaticResource CInfoTooltipIcon}" />
                                        <TextBlock x:Name="AddSecondaryTypeTextBlock"
                                                   Style="{StaticResource TitleTextBlockStyle}"
                                                   Text="{StaticResource lngAdd}">
                                        </TextBlock>
                                    </DockPanel>
                                    <ComboBox x:Name="AllSecondaryTypesComboBoxSize"
                                              ItemsSource="{Binding SecondaryTraits}"
                                              SelectedItem="{Binding TraitUnderEdit.SelectedSecondaryType}"
                                              Width="200"
                                              FontSize="14"
                                              VerticalAlignment="Center">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Trait, Converter={StaticResource LocalizedStringConverter}}" />
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                                <Button Style="{StaticResource ButtonIconCircular}"
                                        hc:IconElement.Geometry="{StaticResource AddGeometry}"
                                        Foreground="{DynamicResource SuccessBrush}"
                                        Command="{Binding TraitUnderEdit.AddSecondaryTypeCommand}"
                                        VerticalAlignment="Bottom"
                                        Margin="15,0"
                                        ToolTip="{StaticResource lngAdd}" />
                            </StackPanel>
                            <!--#endregion-->
                        </StackPanel>
                        <!--#endregion-->

                    </StackPanel>
                    <!--#endregion-->
                </StackPanel>
            </Border>
        </StackPanel>
        <!--#endregion-->
        <!--#endregion-->

    </Grid>
</UserControl>
