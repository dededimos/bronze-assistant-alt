<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Bronze Assistant</title>
</head>
<body>
  <h2>Bronze Assistant - Σχεδιασμός Καμπίνας</h2>

  <div>
    <input type="text" id="userText" placeholder="Περιγραφή καμπίνας" style="width:300px;">
    <button onclick="submitCabinRequest()">Πάρε προσφορά</button>
  </div>

  <div id="result" style="margin-top:20px;"></div>

  <script>
    async function submitCabinRequest() {
      const userText = document.getElementById('userText').value;

      try {
        const response = await fetch('/api/finalCabinCode', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text: userText }),
        });

        if (!response.ok) throw new Error(`Σφάλμα API: ${response.statusText}`);

        const data = await response.json();

        document.getElementById('result').innerHTML = `
          <p><strong>Κωδικός (Debug):</strong> ${data.internal_debug_code}</p>
          <p><strong>Προβολή:</strong> 
            <a href="${data.cabin_url}" target="_blank">Δες την καμπίνα σου</a>
          </p>
        `;
      } catch (error) {
        document.getElementById('result').innerHTML = `Σφάλμα: ${error.message}`;
      }
    }
  </script>
</body>
</html>
